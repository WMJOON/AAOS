name: workflow-topology-scaffolder
version: "2.0.0"
domain: agentic-workflow-architecture
description: >
  Goal → Decision Questions → RSV 추정 → Topology 선택 → Task Graph 설계.
  θ_GT × RSV 기반으로 비용/루프/hand-off를 최소화하는 Workflow Topology를 산출한다.

architecture: 4-layer-with-inline-runbook
design_principle: >
  SKILL.md 단독으로 실행 가능한 self-contained runbook.
  모듈/참조팩은 깊은 분석 시에만 추가 로딩.

modules:
  - id: topology_selection
    question_axis: "어떤 Topology 구조를 선택할 것인가?"
    inline_in_skill: true  # v2.0: 핵심 로직 SKILL.md에 인라인
  - id: node_design
    question_axis: "노드를 어떻게 분리하고 θ_GT/RSV를 설정할 것인가?"
    inline_in_skill: true
  - id: loop_risk
    question_axis: "어떤 루프 위험이 있고 어떻게 방지할 것인가?"
    inline_in_skill: true
  - id: handoff
    question_axis: "Hand-off 시 컨텍스트 손실을 어떻게 최소화할 것인가?"
    inline_in_skill: partial  # 원칙+허용/금지 포맷만 인라인, 상세는 모듈

reference_packs:
  - id: output_contract
    trigger: "ΔQ ≥ 2: 출력 JSON 스키마 참조 필요 시"
  - id: estimator
    trigger: "ΔQ ≥ 2: Runtime estimator 연동 필요 시"

scripts:
  - id: estimator
    path: scripts/estimator.py
    purpose: "Runtime θ_GT/RSV/redundancy 측정"

token_budget:
  skill_md_alone: ~3500     # SKILL.md만으로 대부분 실행 가능
  always_load_max: 1500     # core.md + orchestrator.md (SKILL.md에 인라인됨)
  module_max: 1200          # 모듈 1개 (상세 필요 시)
  reference_max: 2000       # 참조팩 1개

related_skills:
  - 03.workflow-mental-model-execution-designer: "노드 실행 시 멘탈모델 적용 정책 설계"
  - 01.mental-model-loader: "4-Layer 멘탈모델/로딩 정책 원본"

status: stable
owner: Workflow Architecture / Agent Orchestration Layer

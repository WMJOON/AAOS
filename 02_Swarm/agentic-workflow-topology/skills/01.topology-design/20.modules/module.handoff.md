# Module: Hand-off

**질문 축**: "Hand-off 시 컨텍스트 손실을 어떻게 최소화할 것인가?"

---

## 원칙: Hand-off는 비용이다

"중간 서브리포트 생성"을 기본값으로 두지 않는다.
넘기는 것은 "요약"이 아니라 **"결정 가능한 구조"**다.

---

## Hand-off 허용 조건

| 조건 | 이유 |
|------|------|
| 컨텍스트 윈도우 초과 | 물리적 한계 |
| 병렬 실행 노드 간 합류 | 독립 실행 결과를 모아야 함 |
| Human gate | 사람의 판단 개입 |
| 다른 Agent/모델로 위임 | 전문성 분리 |
| 장시간 비동기 실행 | 대기 중 컨텍스트 유지 불가 |

---

## 포맷 규칙

### 허용 포맷

| 포맷 | 용도 | 구조 |
|------|------|------|
| Decision Memo | 판단 필요 시 | `{결정사항, 근거, 트레이드오프, 미결사항}` |
| Risk Register | 위험 전달 시 | `{위험, 영향도, 확률, 대응방안, 소유자}` |
| Constraint List | 제약 전달 시 | `{제약, 출처, 경중, 예외조건}` |
| State Object | 상태 전이 시 | `{현재상태, 전이이력, 다음가능상태}` |
| DQ Status | DQ 진행 상황 | `{DQ_id, status, evidence}` |

### 금지 포맷

| 포맷 | 이유 |
|------|------|
| 산문형 요약 | 구조 없이 암묵지 손실 큼 |
| "참고용" 리포트 | 다음 노드 액션 불명확 |
| 전체 로그 덤프 | 신호 대비 노이즈 과다 |

---

## 최소화 패턴 (Topology별)

| 패턴 | 적용 Topology | 방법 |
|------|-------------|------|
| 단일 컨텍스트 유지 | linear, branching | 하나의 컨텍스트 안에서 순차 실행 |
| 구조화된 중간 산출물 | parallel, fanout_fanin | 병렬 노드 Output을 동일 스키마로 통일 → 합류 노드가 스키마 기반 비교/합성 |
| DQ 상태 추적 | hierarchical | 상위가 DQ목록+상태 전달 → 하위는 자신의 DQ만 처리 |

---

## 판단 루브릭

```
{
  판단: "Hand-off 필요 여부 + 포맷 선택 + 최소화 패턴",
  근거: "Topology 유형 + 허용 조건 충족 여부",
  트레이드오프: "컨텍스트 손실량 vs 병렬성/모듈성 이득",
  확신도: "포맷 규칙이 명확하므로 보통 높음"
}
```

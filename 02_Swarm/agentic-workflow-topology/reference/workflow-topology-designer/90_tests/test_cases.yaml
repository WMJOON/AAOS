# Test Cases for workflow-topology-designer
# 최소 10개, golden_outputs/ 참조

- id: TC01
  name: "금융 규제 대응 - parallel+synthesis"
  input:
    goal: "새로운 금융 규제(가상자산 이용자보호법) 시행에 따른 자사 대응 전략 수립"
    constraints: { time_budget: "3일", compliance: ["금융위원회 가이드라인 준수"] }
    context: { domain: fintech, audience: "경영진+법무팀", risk_tolerance: low }
  expected:
    topology: "composite (parallel + synthesis_centric)"
    dq_count: 6
    rsv_total_range: [5.0, 8.0]
    node_count_range: [4, 7]
    must_have_loop_risk: ["redundancy_accumulation"]
  modules_used: [topology_selection, node_design, loop_risk, handoff]

- id: TC02
  name: "API 설계 검토 - linear"
  input:
    goal: "새 결제 API 엔드포인트 설계가 보안/성능/호환성 기준을 충족하는지 검증"
    constraints: { must_use_tools: ["code_review", "security_scan"] }
    context: { domain: "backend engineering", audience: "테크리드", risk_tolerance: low }
  expected:
    topology: linear
    dq_count: 3
    rsv_total_range: [2.0, 4.0]
    node_count_range: [2, 4]
    must_have_loop_risk: []
  modules_used: [topology_selection, node_design, loop_risk]

- id: TC03
  name: "시장 진입 전략 - hierarchical composite"
  input:
    goal: "AI 고객센터 솔루션의 한국 시장 진입 전략 수립"
    constraints: { token_budget: 100000, compliance: ["개인정보보호법"] }
    context: { domain: "AI SaaS / AICC", audience: "CEO+투자자", risk_tolerance: medium }
  expected:
    topology: "composite (hierarchical + synthesis_centric)"
    dq_count_range: [6, 10]
    rsv_total_range: [8.0, 12.0]
    node_count_range: [6, 10]
    must_have_loop_risk: ["rsv_inflation", "redundancy_accumulation"]
    must_have_human_gate: true
  modules_used: [topology_selection, node_design, loop_risk, handoff]

- id: TC04
  name: "단순 사실 확인 - linear 최소"
  input:
    goal: "특정 날짜의 환율 정보 확인 및 보고"
    constraints: {}
    context: { domain: finance, risk_tolerance: low }
  expected:
    topology: linear
    dq_count: 1
    rsv_total_range: [0.5, 2.0]
    node_count_range: [1, 2]
  modules_used: [topology_selection, node_design]

- id: TC05
  name: "다각도 조사 - parallel"
  input:
    goal: "신규 오피스 이전 후보지 3곳의 비용/접근성/인프라 비교 분석"
    constraints: { time_budget: "1주일" }
    context: { audience: "경영지원팀장", risk_tolerance: medium }
  expected:
    topology: parallel
    dq_count_range: [3, 5]
    node_count_range: [4, 6]
    must_have_handoff: true
  modules_used: [topology_selection, node_design, loop_risk, handoff]

- id: TC06
  name: "조건 분기 - branching"
  input:
    goal: "고객 문의를 유형별로 분류하고 각 유형에 맞는 응대 스크립트 생성"
    constraints: {}
    context: { domain: "customer service", risk_tolerance: medium }
  expected:
    topology: branching
    dq_count_range: [2, 4]
    must_have_conditions_on_edges: true
  modules_used: [topology_selection, node_design, loop_risk]

- id: TC07
  name: "발산→수렴 - fanout_fanin"
  input:
    goal: "신제품 네이밍 후보 10개 생성 후 3개로 압축하여 최종 1개 선정"
    constraints: {}
    context: { domain: marketing, audience: "브랜드팀", risk_tolerance: high }
  expected:
    topology: fanout_fanin
    must_have_loop_risk: ["exploration_spiral"]
  modules_used: [topology_selection, node_design, loop_risk]

- id: TC08
  name: "상태 기반 - state_transition"
  input:
    goal: "고객 온보딩 프로세스를 단계별로 설계하고 각 단계 전이 조건 정의"
    constraints: {}
    context: { domain: "SaaS onboarding", risk_tolerance: low }
  expected:
    topology: state_transition
    must_have_state_objects: true
  modules_used: [topology_selection, node_design, loop_risk]

- id: TC09
  name: "estimator 연동 설계"
  input:
    goal: "금융 규제 대응 워크플로우의 Runtime 모니터링 정책 설계"
    constraints: {}
    context: { domain: fintech, risk_tolerance: low }
  expected:
    must_reference_estimator: true
    execution_policy_has_estimator_integration: true
  modules_used: [topology_selection, node_design, loop_risk]
  packs_loaded: [output_contract, estimator]

- id: TC10
  name: "Goal 모호 → when_unsure 발동"
  input:
    goal: "회사를 더 좋게 만들자"
    constraints: {}
    context: {}
  expected:
    behavior: "Goal 구체화 요청 + 예시 DQ 제안"
    topology: null
    must_trigger_when_unsure: true
  modules_used: []
